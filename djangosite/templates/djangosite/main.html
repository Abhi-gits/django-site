<!--<h1>Hello world</h1>    -->


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Django-Site-Login</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script>
        console.log("ss")

        function login() {
            var username = document.getElementById('loginUsername').value
            var password = document.getElementById('loginPassword').value
            var csrf = document.getElementById('csrf').value

            if (username == '' && password == '') {
                alert('You must enter both')
            }
            var data = {
                'username': username,
                'password': password
            }

            fetch('/api/login/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrf
                    },

                    'body': JSON.stringify(data)
                }).then(result => result.json())
                .then(response => {

                    if (response.status = 200) {

                        window.location.href = 'djangosite/dashboard.html'
                    } else {
                        alert(response.message)
                    }
                })

        }

        function signup() {
            var username = document.getElementById('loginUsername').value
            var password = document.getElementById('loginPassword').value
            var csrf = document.getElementById('csrf').value

            if (username == '' && password == '') {
                alert('You must enter both')
            }
            var data = {
                'username': username,
                'password': password
            }

            fetch('/api/signup/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrf
                    },

                    'body': JSON.stringify(data)
                }).then(result => result.json())
                .then(response => {
                    console.log(response)
                    if (response.status = 200) {


                    } else {
                        alert(response.message)
                    }
                })

        }
    </script>
</head>
</head>

<body>

    {% block start %} {% endblock %}


    <div class=container-fluid px-3>
        <div class="row min-vh-100">
            <div class="col-md-8 col-lg-6 col-xl-5 d-flex align-items-center">
                <div class="w-100 py-5 px-md-5 px-xl-6 position-relative">
                    <h1> JALA ACADEMY </h1>

                    <div class="form-validate">
                        <div class="form-group">
                            <label class="form-label" for="loginUsername"> Username</label>
                            <input class="form-control" name="loginUsername" id="loginUsername" type="email" placeholder="name@address.com" autocomplete="off" required data-msg="Please enter your email">
                        </div>
                        <div class="form-group mb-4">
                            <div class="row">
                                <div class="col">
                                    <label class="form-label" for="loginPassword"> Password</label>
                                </div>
                            </div>
                            <input class="form-control" name="loginPassword" id="loginPassword" placeholder="Password" type="password" required data-msg="Please enter your password">
                        </div>
                        <!-- Submit-->
                        <button class="btn btn-lg btn-block btn-primary" onclick="login()">Login</button>
                        <p class="text-center"><small class="text-muted text-center">Don't have an account yet? <a href="{% url 'signup' %}">Sign Up</a></small></p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-lg-6 col-xl-7 d-none d-md-block">
                <!-- Image-->
                <div class="bg-cover h-100 mr-n3" style="background-image: url(https://images.pexels.com/photos/1995730/pexels-photo-1995730.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940);"></div>
            </div>
        </div>
    </div>


    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <script src="" async defer></script>
</body>
<footer>
    <div class="container">
        <p class="text-muted text-center">
            Made with â™¥ by Abhishek ðŸ’«
        </p>
        <h6 class="text-muted text-center">
            <small>
                  <a href="http://www.contact.com/contact-me/">Contact Me</a>
                </small>
        </h6>
    </div>
</footer>

</html>